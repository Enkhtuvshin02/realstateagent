2025-06-01 22:58:42,065 - main - ERROR - ‚ùå WeasyPrint system dependencies missing!
2025-06-01 22:58:42,065 - main - ERROR - Error: cannot load library 'libgobject-2.0-0': dlopen(libgobject-2.0-0, 0x0002): tried: 'libgobject-2.0-0' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibgobject-2.0-0' (no such file), '/usr/lib/libgobject-2.0-0' (no such file, not in dyld cache), 'libgobject-2.0-0' (no such file).  Additionally, ctypes.util.find_library() did not manage to locate a library called 'libgobject-2.0-0'
2025-06-01 22:58:42,065 - main - INFO - üîß Fix on macOS:
2025-06-01 22:58:42,065 - main - INFO -   1. Install Homebrew: /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
2025-06-01 22:58:42,065 - main - INFO -   2. Install dependencies: brew install pango gdk-pixbuf libffi
2025-06-01 22:58:42,065 - main - INFO -   3. Reinstall WeasyPrint: pip uninstall weasyprint && pip install weasyprint
2025-06-01 22:58:42,067 - main - INFO - üöÄ Starting Professional Real Estate Assistant v2.0...
2025-06-01 22:58:42,067 - main - INFO - üìÑ Using fallback PDF generation (ReportLab)
2025-06-01 22:58:42,067 - main - WARNING - WeasyPrint issue: WeasyPrint system dependencies missing: cannot load library 'libgobject-2.0-0': dlopen(libgobject-2.0-0, 0x0002): tried: 'libgobject-2.0-0' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibgobject-2.0-0' (no such file), '/usr/lib/libgobject-2.0-0' (no such file, not in dyld cache), 'libgobject-2.0-0' (no such file).  Additionally, ctypes.util.find_library() did not manage to locate a library called 'libgobject-2.0-0'
2025-06-01 22:58:42,067 - main - INFO - üí° For professional PDFs, install WeasyPrint dependencies:
2025-06-01 22:58:42,067 - main - INFO -   brew install pango gdk-pixbuf libffi
2025-06-01 22:58:42,067 - main - INFO -   pip install weasyprint
2025-06-01 22:58:42,067 - services.initialization_service - INFO - üîß Initializing services...
2025-06-01 22:58:42,067 - services.initialization_service - INFO - ü§ñ Initializing LLM...
2025-06-01 22:58:42,186 - services.initialization_service - INFO - ‚úÖ LLM initialized
2025-06-01 22:58:42,186 - services.initialization_service - INFO - üîç Initializing search tool...
2025-06-01 22:58:42,186 - services.initialization_service - INFO - ‚úÖ Search tool initialized
2025-06-01 22:58:42,186 - services.initialization_service - INFO - üè† Initializing property retriever...
2025-06-01 22:58:42,198 - services.initialization_service - INFO - ‚úÖ Property retriever initialized
2025-06-01 22:58:42,199 - services.initialization_service - INFO - üìä Initializing district analyzer...
2025-06-01 22:58:42,223 - agents.district_analyzer - INFO - üìÖ Cached data is 1 days old, still fresh
2025-06-01 22:58:42,223 - agents.district_analyzer - INFO - üì¶ Loading cached vectorstore data...
2025-06-01 22:58:43,837 - httpx - INFO - HTTP Request: POST https://api.together.xyz/v1/embeddings "HTTP/1.1 200 OK"
2025-06-01 22:58:44,876 - httpx - INFO - HTTP Request: POST https://api.together.xyz/v1/embeddings "HTTP/1.1 200 OK"
2025-06-01 22:58:45,517 - httpx - INFO - HTTP Request: POST https://api.together.xyz/v1/embeddings "HTTP/1.1 200 OK"
2025-06-01 22:58:46,003 - httpx - INFO - HTTP Request: POST https://api.together.xyz/v1/embeddings "HTTP/1.1 200 OK"
2025-06-01 22:58:46,890 - httpx - INFO - HTTP Request: POST https://api.together.xyz/v1/embeddings "HTTP/1.1 200 OK"
2025-06-01 22:58:47,548 - httpx - INFO - HTTP Request: POST https://api.together.xyz/v1/embeddings "HTTP/1.1 200 OK"
2025-06-01 22:58:48,141 - httpx - INFO - HTTP Request: POST https://api.together.xyz/v1/embeddings "HTTP/1.1 200 OK"
2025-06-01 22:58:48,553 - httpx - INFO - HTTP Request: POST https://api.together.xyz/v1/embeddings "HTTP/1.1 200 OK"
2025-06-01 22:58:48,562 - faiss.loader - INFO - Loading faiss.
2025-06-01 22:58:48,588 - faiss.loader - INFO - Successfully loaded faiss.
2025-06-01 22:58:48,591 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-06-01 22:58:48,591 - agents.district_analyzer - INFO - üì¶ Loaded 8 documents from cache
2025-06-01 22:58:48,592 - agents.district_analyzer - INFO - ‚úÖ Successfully loaded cached vectorstore data
2025-06-01 22:58:48,592 - services.initialization_service - INFO - ‚úÖ District analyzer initialized
2025-06-01 22:58:48,592 - services.initialization_service - INFO - üìÑ Initializing PDF generator...
2025-06-01 22:58:48,592 - services.initialization_service - INFO - ‚úÖ PDF generator initialized
2025-06-01 22:58:48,592 - services.initialization_service - INFO - üìö Loading initial data...
2025-06-01 22:58:48,592 - services.initialization_service - INFO - üìä Cache status: {'cache_exists': True, 'last_update_exists': True, 'is_fresh': True, 'age_days': 1, 'last_update': '2025-05-31T20:32:29.681689'}
2025-06-01 22:58:48,592 - services.initialization_service - INFO - üìÖ Using cached data (fresh)
2025-06-01 22:58:48,592 - main - INFO - ‚úÖ All components initialized successfully!
2025-06-01 22:58:48,592 - main - INFO - üß† Chain-of-Thought reasoning is active!
2025-06-01 22:58:48,592 - main - INFO - üìã Basic PDF reports enabled (upgrade to WeasyPrint for professional quality)
2025-06-01 22:58:48,592 - main - INFO - üîç Available features:
2025-06-01 22:58:48,592 - main - INFO -   ‚Ä¢ Property URL analysis with unegui.mn integration
2025-06-01 22:58:48,592 - main - INFO -   ‚Ä¢ District comparison across 9 Ulaanbaatar districts
2025-06-01 22:58:48,592 - main - INFO -   ‚Ä¢ Real-time market research with internet search
2025-06-01 22:58:48,592 - main - INFO -   ‚Ä¢ Chain-of-Thought enhanced reasoning
2025-06-01 22:58:48,592 - main - INFO -   ‚Ä¢ Basic PDF report generation
2025-06-01 22:59:07,129 - main - INFO - üìù Chat message received: –ë“Ø—Ö –¥“Ø“Ø—Ä–≥–∏–π–Ω “Ø–Ω—ç —Ö–∞—Ä—å—Ü—É—É–ª–∞—Ö
2025-06-01 22:59:07,129 - services.chat_service - INFO - üîÑ Processing message: –ë“Ø—Ö –¥“Ø“Ø—Ä–≥–∏–π–Ω “Ø–Ω—ç —Ö–∞—Ä—å—Ü—É—É–ª–∞—Ö
2025-06-01 22:59:07,129 - services.chat_service - INFO - üìã Message classified as: district_query
2025-06-01 22:59:07,129 - services.chat_service - INFO - üß† CoT application decision: True
2025-06-01 22:59:07,129 - services.chat_service - INFO - üìç Processing district query
2025-06-01 22:59:07,129 - agents.district_analyzer - INFO - üîç Analyzing district for location: 'ALL_DISTRICTS_COMPARISON'
2025-06-01 22:59:07,129 - agents.district_analyzer - INFO - üìÖ Cached data is 1 days old, still fresh
2025-06-01 22:59:07,129 - agents.district_analyzer - INFO - üìä Using cached data (fresh)
2025-06-01 22:59:07,129 - agents.district_analyzer - INFO - üìä Available districts in vectorstore: –ë–∞—è–Ω–∑“Ø—Ä—Ö, –°“Ø—Ö–±–∞–∞—Ç–∞—Ä, –ë–∞—è–Ω–≥–æ–ª, –ß–∏–Ω–≥—ç–ª—Ç—ç–π, –•–∞–Ω-–£—É–ª, –°–æ–Ω–≥–∏–Ω–æ—Ö–∞–π—Ä—Ö–∞–Ω, –ë–∞–≥–∞–Ω—É—É—Ä, –ù–∞–ª–∞–π—Ö
2025-06-01 22:59:07,838 - httpx - INFO - HTTP Request: POST https://api.together.xyz/v1/embeddings "HTTP/1.1 200 OK"
2025-06-01 22:59:07,843 - agents.district_analyzer - WARNING - ‚ùå No exact district information found in vectorstore for: 'ALL_DISTRICTS_COMPARISON'. Providing available districts list.
2025-06-01 22:59:21,785 - httpx - INFO - HTTP Request: POST https://api.together.xyz/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-01 22:59:21,788 - agents.district_analyzer - INFO - District analysis LLM raw response (first 100 chars): –¢–∞–Ω—ã —Ö“Ø—Å—ç–ª—Ç–∏–π–≥ —Ö“Ø–ª—ç—ç–Ω –∞–≤–ª–∞–∞. –£–ª–∞–∞–Ω–±–∞–∞—Ç–∞—Ä —Ö–æ—Ç—ã–Ω –¥“Ø“Ø—Ä–≥“Ø“Ø–¥–∏–π–Ω –∑–∞—Ö –∑—ç—ç–ª–∏–π–Ω –º—ç–¥—ç—ç–ª—ç–ª–¥ —Å—É—É—Ä–∏–ª–∞–Ω –¥–∞—Ä–∞–∞—Ö–∏–π–Ω ...
2025-06-01 22:59:34,734 - httpx - INFO - HTTP Request: POST https://api.together.xyz/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-01 22:59:34,735 - services.chat_service - INFO - üß† Applying CoT enhancement to district analysis...
2025-06-01 22:59:43,283 - httpx - INFO - HTTP Request: POST https://api.together.xyz/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-01 22:59:43,285 - main - INFO - ‚úÖ Response generated in 36.16s
2025-06-01 22:59:43,285 - main - INFO - üöÄ Applied enhancements: Chain-of-Thought reasoning
2025-06-01 23:11:28,431 - main - INFO - üìù Chat message received: –¢–∏–π–º—ç—ç
2025-06-01 23:11:28,432 - services.chat_service - INFO - üîÑ Processing message: –¢–∏–π–º—ç—ç
2025-06-01 23:11:28,432 - services.report_service - INFO - üìä Generating district report with search integration
2025-06-01 23:11:28,432 - agents.district_analyzer - INFO - üìÖ Cached data is 1 days old, still fresh
2025-06-01 23:11:28,432 - agents.district_analyzer - INFO - üìä Using cached data (fresh)
2025-06-01 23:11:28,432 - services.report_service - INFO - Extracting data from 8 documents...
2025-06-01 23:11:28,432 - services.report_service - INFO - Added district: –ë–∞—è–Ω–∑“Ø—Ä—Ö with price 1
2025-06-01 23:11:28,432 - services.report_service - INFO - Added district: –°“Ø—Ö–±–∞–∞—Ç–∞—Ä with price 1
2025-06-01 23:11:28,432 - services.report_service - INFO - Added district: –ë–∞—è–Ω–≥–æ–ª with price 1
2025-06-01 23:11:28,433 - services.report_service - INFO - Added district: –ß–∏–Ω–≥—ç–ª—Ç—ç–π with price 1
2025-06-01 23:11:28,433 - services.report_service - INFO - Added district: –•–∞–Ω-–£—É–ª with price 1
2025-06-01 23:11:28,433 - services.report_service - INFO - Added district: –°–æ–Ω–≥–∏–Ω–æ—Ö–∞–π—Ä—Ö–∞–Ω with price 1
2025-06-01 23:11:28,433 - services.report_service - INFO - Added district: –ë–∞–≥–∞–Ω—É—É—Ä with price 1
2025-06-01 23:11:28,433 - services.report_service - INFO - Added district: –ù–∞–ª–∞–π—Ö with price 1
2025-06-01 23:11:28,433 - services.report_service - INFO - Successfully extracted 8 districts with valid data
2025-06-01 23:11:28,433 - services.report_service - INFO - üîç Searching for market trends: –£–ª–∞–∞–Ω–±–∞–∞—Ç–∞—Ä –æ—Ä–æ–Ω —Å—É—É—Ü–Ω—ã –∑–∞—Ö –∑—ç—ç–ª “Ø–Ω—ç —á–∏–≥–ª—ç–ª 2024 2025 –¥“Ø“Ø—Ä—ç–≥ —Ö–∞—Ä—å—Ü—É—É–ª–∞–ª—Ç
2025-06-01 23:11:44,687 - httpx - INFO - HTTP Request: POST https://api.together.xyz/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-01 23:11:44,689 - services.report_service - INFO - ‚úÖ Search results processed for district report
2025-06-01 23:11:53,975 - httpx - INFO - HTTP Request: POST https://api.together.xyz/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-01 23:11:53,977 - services.report_service - ERROR - ‚ùå Error generating district report: 'PDFReportGenerator' object has no attribute 'generate_district_summary_report'
2025-06-01 23:11:53,977 - main - INFO - ‚úÖ Response generated in 25.55s
2025-06-01 23:19:33,128 - services.initialization_service - INFO - üßπ Property retriever closed
2025-06-01 23:19:33,128 - main - INFO - üßπ Services cleaned up successfully
